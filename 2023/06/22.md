# 2023.06.22 TIL

## Study
### Spring Project
- 질문 검색 기능 구현
- 질문 투표 기능 구현
- cors 오류 해결
- Security 권한 부여에 따른 테스트 코드 리팩토링

## Reflection
- 오늘 회의시간을 제외한 10시부터 10시까지 쭉 불코딩했다; 기능 구현은 어렵지 않았으나, 지긋지긋한 cors문제와 Security 권한 부여에 따른 테스트 코드 리팩토링에서 시간을 거의 다 잡아 먹었다.
질문을 수정하거나 등록하거나 삭제하려 할 때, 로그인한 유저와 작성자가 같은지 비교하기 위해 HandlerMethodArgumentResolver를 상속받아 만든 클래스에서 로그인 한 유저를 파라미터로 받아오게끔 개발했는데, 필터를 제외시켜 security를 꺼버리면
시큐리티컨텍스트 홀더에서 인증 정보를 가져올 때 null 값이라 NPE가 발생해 Security를 적용한 채로 테스트 코드를 리팩토링 해야했다. MockUser를 만드는 방법이 있긴 했는데 DB에 더미 사용자를 넣어서 해야하는 방법 같아서 제외 시켰다.
그리고 해결한 방법은 유효한 토큰은 유효기간을 짧게 정해 테스트 할 동안에만 만들어 두고 이를 사용하는 것... 이 방법으로 테스트 코드는 통과했다. cors 해결했을 때보다 훨씬 많은 시간을 쏟아야 했다. ㅠㅠㅠ
포기할까도 싶었지만, 팀원이 작성한 Security 코드를 분석하다보니 Spring Security 토큰 인증 방식에 대해 더 알 수 있게 되는 계기가 되어 뿌듯했다.
- 중간마다 페어했던 분이나 팀원의 질문을 받았다. 난 트러블 슈팅하는 걸 좋아해서 남의 코드 해결하는 것도 재미씀 ㅋㅎ
- 프로젝트에 힘을 쏟아부은 오늘이라 역시 알고리즘 문제는 풀지 못했다.. 대신 프로젝트 기능 구현은 얼추 끝나서 내일은 정말 할 수 있을 듯 ㅠ 내일은 스프링 스터디 정리와 알고리즘, SQL 문제를 풀어야겠다.
- 아 어제도 고생깨나 했는데 TIL을 안썼네.. TIL라 쓰고 일기라 부른다.
## Tommorow I'll Learn
- 운영 환경 DB MySQL .. or Postgre로 변경해보기
- 스프링 스터디 CGLIB 정리
- 알고리즘 1문제
- SQL 1문제


